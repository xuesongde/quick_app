{"version":3,"sources":["webpack:///webpack/bootstrap 4798f8924579b4d554c6?bf85*","webpack:///./src/List/index.ux?c036","webpack:///./src/Common/api/index.js?b58b","webpack:///./src/List/index.ux?27d8","webpack:///./src/Common/assets/css/article.css","webpack:///./src/List/index.ux","webpack:///./src/util.js"],"names":["data","hasMore","size","cursor","loading","list","onInit","loadData","onMenuPress","$app","showMenu","api","getList","console","log","JSON","stringify","is_more","length","cinecism_info","error","getThumbUrl","goDetail","id","router","push","uri","params","moduleOwn","exports","default","module","accessors","some","acc","Error","join","_descriptor","forEach","accType","Object","assign","name","access","warn"],"mappings":";;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,yCAAwC,0BAA0B;;;;;;;;;;;;ACblE;;AAEA;AACA;AACA,EAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,G;;;;;;;;;ACxCA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,8BAA6B,iBAAiB;AAC9C;AACA;AACA;AACA;AACA,iCAAgC,oEAAoE;AACpG;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA,UAAS;AACT;AACA;AACA;AACA,mCAAkC;AAClC,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,E;;;;;;;;;;;;;;ACjCA;;;;AACE;;;;AACA;;;;;;;;mBAEe;AACbA,SAAM;AACJC,cAAS,IADL;AAEJC,WAAM,EAFF;AAGJC,aAAQ,CAHJ;AAIJC,cAAS,KAJL;AAKJC,WAAM;AALF,IADO;AAQbC,SARa,oBAQH;AACR,UAAKC,QAAL;AACD,IAVY;AAWbC,cAXa,yBAWC;AACZ,UAAKC,IAAL,CAAUC,QAAV;AACD,IAbY;AAcPH,WAdO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAeP,CAAC,KAAKH,OAAN,IAAiB,KAAKH,OAff;AAAA;AAAA;AAAA;;AAAA;;AAiBP,oBAAKG,OAAL,GAAe,IAAf;AAjBO;AAAA,sBAkBUO,gBAAIC,OAAJ,CAAY;AAC3BT,yBAAQ,KAAKA,MADc;AAE3BD,uBAAM,KAAKA;AAFgB,gBAAZ,CAlBV;;AAAA;AAkBHF,mBAlBG;;;AAuBPa,uBAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAehB,IAAf,CAAZ;AACA,oBAAKI,OAAL,GAAe,KAAf;;AAEA,oBAAKC,IAAL,gCAAgB,KAAKA,IAArB,sBAA8BL,KAAKK,IAAnC;;AAEA,oBAAKJ,OAAL,GAAeD,KAAKiB,OAApB;AACA,oBAAKd,MAAL,GAAcH,KAAKK,IAAL,CAAUL,KAAKK,IAAL,CAAUa,MAAV,GAAmB,CAA7B,EAAgCC,aAAhC,CAA8ChB,MAA9C,IAAwD,CAAtE;AA7BO;AAAA;;AAAA;AAAA;AAAA;;AA+BPU,uBAAQO,KAAR;;AA/BO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAmCbC,iCAnCa;AAoCbC,WApCa,oBAoCHC,EApCG,EAoCC;AACZC,sBAAOC,IAAP,CAAY;AACVC,YAAK,SADK;AAEVC,eAAQ,EAAEJ,MAAF;AAFE,MAAZ;AAID;AAzCY,E;;;AA4Cf,KAAMK,YAAYC,QAAQC,OAAR,IAAmBC,OAAOF,OAA5C;AACA,KAAMG,YAAY,CAAC,QAAD,EAAW,WAAX,EAAwB,SAAxB,CAAlB;;AAEA,KAAIJ,UAAU5B,IAAV,IAAkBgC,UAAUC,IAAV,CAAe,UAAUC,GAAV,EAAe;AAAE,UAAON,UAAUM,GAAV,CAAP;AAAuB,EAAvD,CAAtB,EAAgF;AAC9E,SAAM,IAAIC,KAAJ,CAAU,uBAAuBH,UAAUI,IAAV,CAAe,GAAf,CAAvB,GAA6C,0BAAvD,CAAN;AACD,EAFD,MAGK,IAAI,CAACR,UAAU5B,IAAf,EAAqB;AACxB4B,aAAU5B,IAAV,GAAiB,EAAjB;AACA4B,aAAUS,WAAV,GAAwB,EAAxB;AACAL,aAAUM,OAAV,CAAkB,UAAUJ,GAAV,EAAe;AAC/B,SAAMK,kBAAiBX,UAAUM,GAAV,CAAjB,CAAN;AACA,SAAIK,YAAY,QAAhB,EAA0B;AACxBX,iBAAU5B,IAAV,GAAiBwC,OAAOC,MAAP,CAAcb,UAAU5B,IAAxB,EAA8B4B,UAAUM,GAAV,CAA9B,CAAjB;AACA,YAAK,IAAMQ,IAAX,IAAmBd,UAAUM,GAAV,CAAnB,EAAmC;AACjCN,mBAAUS,WAAV,CAAsBK,IAAtB,IAA8B,EAAEC,QAAQT,GAAV,EAA9B;AACD;AACF,MALD,MAMK,IAAIK,YAAY,UAAhB,EAA4B;AAC/B1B,eAAQ+B,IAAR,CAAa,eAAeV,GAAf,GAAqB,eAAlC;AACD;AACF,IAXD;AAYD,G;;;;;;ACrEH;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,6BAA4B,mBAAmB;AAC/C;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,qBAAqB;AAC/C,QAAO;AACP;AACA;AACA,+BAA8B,sBAAsB;AACpD,YAAW;AACX;AACA,+BAA8B,gDAAgD;AAC9E;AACA,UAAS;AACT;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,E","file":"List/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4798f8924579b4d554c6","var $app_template$ = require(\"!!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/json-loader.js!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/template-loader.js!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/fragment-loader.js?index=0&type=templates!./index.ux\")\nvar $app_style$ = require(\"!!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/json-loader.js!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/style-loader.js?index=0&type=styles!../Common/assets/css/article.css\")\nvar $app_script$ = require(\"!!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/script-loader.js!babel-loader?presets[]=E:\\\\sina_git\\\\quickapp-demo\\\\node_modules\\\\babel-preset-env&presets=E:\\\\sina_git\\\\quickapp-demo\\\\node_modules\\\\babel-preset-env&plugins[]=E:\\\\sina_git\\\\quickapp-demo\\\\node_modules\\\\_hap-tools@0.0.2@hap-tools\\\\lib\\\\jsx-loader.js&plugins=E:\\\\sina_git\\\\quickapp-demo\\\\node_modules\\\\_hap-tools@0.0.2@hap-tools\\\\lib\\\\jsx-loader.js&comments=false!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/access-loader.js!../../node_modules/_hap-tools@0.0.2@hap-tools/lib/fragment-loader.js?index=0&type=scripts!./index.ux?isEntry=true\")\n\n$app_define$('@app-component/index', [], function($app_require$, $app_exports$, $app_module$){\n     $app_script$($app_module$, $app_exports$, $app_require$)\n     if ($app_exports$.__esModule && $app_exports$.default) {\n            $app_module$.exports = $app_exports$.default\n        }\n     $app_module$.exports.template = $app_template$\n     $app_module$.exports.style = $app_style$\n})\n\n$app_bootstrap$('@app-component/index',{ packagerVersion: '0.0.2'})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/List/index.ux\n// module id = 0\n// module chunks = 3","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar SL_API = 'http://api-xl9-ssl.xunlei.com/sl';\n\nexports.default = {\n  getList: function getList(_ref) {\n    var _ref$cursor = _ref.cursor,\n        cursor = _ref$cursor === undefined ? 0 : _ref$cursor,\n        _ref$size = _ref.size,\n        size = _ref$size === undefined ? 10 : _ref$size,\n        _ref$category = _ref.category,\n        category = _ref$category === undefined ? 'new' : _ref$category;\n\n    return natives.fetch({\n      url: SL_API + '/cinecism/list',\n      method: 'GET',\n      data: {\n        cursor: cursor,\n        size: size,\n        category: category\n      }\n    }).then(function (res) {\n      return res.data;\n    });\n  },\n  getReview: function getReview(id) {\n    return natives.fetch({\n      url: SL_API + '/cinecism/info',\n      method: 'GET',\n      data: {\n        id: id,\n        recommend_size: 0\n      }\n    }).then(function (res) {\n      return res.data;\n    });\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Common/api/index.js\n// module id = 6\n// module chunks = 1 3","module.exports = {\n  \"type\": \"list\",\n  \"attr\": {},\n  \"classList\": [\n    \"list-main\"\n  ],\n  \"events\": {\n    \"scrollbottom\": \"loadData\"\n  },\n  \"children\": [\n    {\n      \"type\": \"list-item\",\n      \"attr\": {\n        \"type\": \"review\"\n      },\n      \"classList\": [\n        \"list-item\"\n      ],\n      \"repeat\": function () {return this.list},\n      \"children\": [\n        {\n          \"type\": \"image\",\n          \"attr\": {\n            \"src\": function () {return this.getThumbUrl(this.$item.cinecism_info.cover_url,350,200)},\n            \"alt\": \"../Common/assets/img/default.png\"\n          },\n          \"classList\": [\n            \"art-pic\"\n          ],\n          \"events\": {\n            \"click\": function (evt) {this.goDetail(this.$item.cinecism_info.id,evt)}\n          }\n        },\n        {\n          \"type\": \"text\",\n          \"attr\": {\n            \"value\": function () {return this.$item.cinecism_info.title}\n          },\n          \"classList\": [\n            \"art-title\"\n          ]\n        }\n      ]\n    },\n    {\n      \"type\": \"list-item\",\n      \"attr\": {\n        \"type\": \"loadMore\",\n        \"show\": function () {return this.hasMore}\n      },\n      \"classList\": [\n        \"load-more\"\n      ],\n      \"children\": [\n        {\n          \"type\": \"progress\",\n          \"attr\": {\n            \"type\": \"circular\"\n          },\n          \"classList\": [\n            \"round\"\n          ]\n        },\n        {\n          \"type\": \"text\",\n          \"attr\": {\n            \"value\": \"加载更多\"\n          }\n        }\n      ]\n    }\n  ]\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_hap-tools@0.0.2@hap-tools/lib/json-loader.js!./~/_hap-tools@0.0.2@hap-tools/lib/template-loader.js!./~/_hap-tools@0.0.2@hap-tools/lib/fragment-loader.js?index=0&type=templates!./src/List/index.ux\n// module id = 10\n// module chunks = 3","module.exports = {\n  \".list-main\": {\n    \"display\": \"flex\",\n    \"flexDirection\": \"column\",\n    \"width\": \"100%\",\n    \"marginTop\": \"0px\",\n    \"marginRight\": \"10px\",\n    \"marginBottom\": \"0px\",\n    \"marginLeft\": \"10px\"\n  },\n  \".list-item\": {\n    \"display\": \"flex\",\n    \"flexDirection\": \"row\",\n    \"marginTop\": \"20px\"\n  },\n  \".art-pic\": {\n    \"width\": \"350px\",\n    \"height\": \"200px\",\n    \"marginRight\": \"10px\"\n  },\n  \".art-title\": {\n    \"flexGrow\": 1\n  },\n  \".load-more\": {\n    \"textAlign\": \"center\",\n    \"display\": \"flex\",\n    \"justifyContent\": \"center\",\n    \"marginTop\": \"10px\"\n  },\n  \".round\": {\n    \"width\": \"50px\",\n    \"height\": \"50px\"\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_hap-tools@0.0.2@hap-tools/lib/json-loader.js!./~/_hap-tools@0.0.2@hap-tools/lib/style-loader.js?index=0&type=styles!./src/Common/assets/css/article.css\n// module id = 11\n// module chunks = 3","import router from '@system.router'\r\n  import api from '../Common/api/index.js'\r\n  import { getThumbUrl } from '../util'\r\n\r\n  export default {\r\n    data: {\r\n      hasMore: true,\r\n      size: 10,\r\n      cursor: 0,\r\n      loading: false,\r\n      list: []\r\n    },\r\n    onInit () {\r\n      this.loadData()\r\n    },\r\n    onMenuPress() {\r\n      this.$app.showMenu()\r\n    },\r\n    async loadData () {\r\n      if (!this.loading && this.hasMore) {\r\n        try {\r\n          this.loading = true\r\n          let data = await api.getList({\r\n            cursor: this.cursor,\r\n            size: this.size\r\n          })\r\n          \r\n          console.log(JSON.stringify(data))\r\n          this.loading = false\r\n\r\n          this.list = [...this.list, ...data.list]\r\n\r\n          this.hasMore = data.is_more\r\n          this.cursor = data.list[data.list.length - 1].cinecism_info.cursor || 0\r\n        } catch (error) {\r\n          console.error(error)\r\n        }\r\n      }\r\n    },\r\n    getThumbUrl,\r\n    goDetail (id) {\r\n      router.push({\r\n        uri: '/Detail',\r\n        params: { id }\r\n      })\r\n    }\r\n  }\n\n  const moduleOwn = exports.default || module.exports\n  const accessors = ['public', 'protected', 'private']\n\n  if (moduleOwn.data && accessors.some(function (acc) { return moduleOwn[acc] })) {\n    throw new Error('页面VM对象中的属性data不可与\"' + accessors.join(',') + '\"同时存在，请使用private替换data名称')\n  }\n  else if (!moduleOwn.data) {\n    moduleOwn.data = {}\n    moduleOwn._descriptor = {}\n    accessors.forEach(function (acc) {\n      const accType = typeof moduleOwn[acc]\n      if (accType === 'object') {\n        moduleOwn.data = Object.assign(moduleOwn.data, moduleOwn[acc])\n        for (const name in moduleOwn[acc]) {\n          moduleOwn._descriptor[name] = { access: acc }\n        }\n      }\n      else if (accType === 'function') {\n        console.warn('页面VM对象中的属性' + acc + '的值不能是函数，请使用对象')\n      }\n    })\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/List/index.ux?isEntry=true","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showMenu = showMenu;\nexports.createShortcut = createShortcut;\nexports.qiniuImageView2 = qiniuImageView2;\nexports.getThumbUrl = getThumbUrl;\n/**\r\n * 显示菜单\r\n */\nfunction showMenu() {\n  var prompt = $app_require$('@app-module/system.prompt');\n  var router = $app_require$('@app-module/system.router');\n  var appInfo = $app_require$('@app-module/system.app').getInfo();\n  prompt.showContextMenu({\n    itemList: ['保存桌面', '关于', '取消'],\n    success: function success(ret) {\n      switch (ret.index) {\n        case 0:\n          // 保存桌面\n          createShortcut();\n          break;\n        case 1:\n          // 关于\n          router.push({\n            uri: '/About',\n            params: { name: appInfo.name, icon: appInfo.icon }\n          });\n          break;\n        case 2:\n          // 取消\n          break;\n        default:\n          prompt.showToast({ message: 'error' });\n      }\n    }\n  });\n}\n\n/**\r\n * 创建桌面图标\r\n * 注意：使用加载器测试`创建桌面快捷方式`功能时，请先在`系统设置`中打开`应用加载器`的`桌面快捷方式`权限\r\n */\nfunction createShortcut() {\n  var prompt = $app_require$('@app-module/system.prompt');\n  var shortcut = $app_require$('@app-module/system.shortcut');\n  shortcut.hasInstalled({\n    success: function success(ret) {\n      if (ret) {\n        prompt.showToast({ message: '已创建桌面图标' });\n      } else {\n        shortcut.install({\n          success: function success() {\n            prompt.showToast({ message: '成功创建桌面图标' });\n          },\n          fail: function fail(errmsg, errcode) {\n            prompt.showToast({ message: 'error: ' + errcode + '---' + errmsg });\n          }\n        });\n      }\n    }\n  });\n}\n\n/** 七牛图片缩略、剪裁 */\nfunction qiniuImageView2(url, mode, w, h) {\n  var q = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 90;\n\n  return url + '?imageView2/' + mode + (w ? '/w/' + w : '') + (h ? '/h/' + h : '') + ('/q/' + q + '/interlace/1');\n}\n\n/**\r\n * 获取缩略图url\r\n * @param {string} url\r\n * @param {number} width\r\n * @param {number} height\r\n */\nfunction getThumbUrl(url, width, height) {\n  var plugins = {\n    qiniu: {\n      hosts: ['sl.wangpan.7niu.n0808.com'],\n      handler: function handler() {\n        return qiniuImageView2(url, 0, width, height);\n      }\n    },\n    dnion: {\n      hosts: ['static-xl9-ssl.xunlei.com'],\n      handler: function handler() {\n        return url + '?w=' + width + '&h=' + height;\n      }\n    }\n  };\n\n  for (var i in plugins) {\n    var _plugins$i = plugins[i],\n        hosts = _plugins$i.hosts,\n        handler = _plugins$i.handler;\n\n    if (hosts.some(function (host) {\n      return url.match(host);\n    })) {\n      return handler();\n    }\n  }\n\n  // 如果没有匹配，就返回原url\n  return url;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/util.js\n// module id = 13\n// module chunks = 3 4"],"sourceRoot":""}